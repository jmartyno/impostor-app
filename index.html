<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IMPOSTOR</title>
<link rel="manifest" href="manifest.json">

<style>
    body { font-family: Arial; text-align:center; padding:20px; background:#f0f8ff; }
    button { padding:15px; font-size:18px; margin-top:20px; width:80%; border-radius:12px; }
    #game { display:none; }
    #wordBox { font-size:32px; margin:30px 0; font-weight:bold; }
    #pinBox { display:none; }
    #leyenda { 
        display:none;
        font-size:14px;
        margin-top:15px;
        padding:10px;
        color:#444;
        max-width:90%;
        margin-left:auto;
        margin-right:auto;
    }
</style>

<script>
// =============================
// LISTAS TEM츼TICAS
// =============================
const listas = {
    animales: [
        "PERRO","GATO","ELEFANTE","LEON","TIBURON","PING칖INO","CABALLO","JIRAFA","BABOSA","ESCORPION","RATA"
    ],
    objetos: [
        "TECLADO","TELEVISOR","VENTILADOR","RELOJ","MOCHILA","TIJERAS","BOTELLA","LINTERNA","NEVERA","BOTELLA"
    ],
    profesiones: [
        "MEDICO","PILOTO","ABOGADO","CARPINTERO","MECANICO","PROFESOR","ENFERMERO","CAMARERO","INGENIERO","MUSICO"
    ],
    acciones: [
        "CORRER","SALTAR","BOSTEZAR","ESCRIBIR","BESAR","SUSURRAR","NADAR","SALUDAR"
    ],
    comida: [
        "PIZZA","HAMBURGUESA","SUSHI","HELADO","PAELLA","TORTILLA","CHOCOLATE","PASTA"
    ],
    marcas: [
        "NIKE","ADIDAS","ZARA","APPLE","TESLA","GUCCI","PRADA","SAMSUNG","BMW",
        "MERCEDES","ROLEX","RAYBAN","CHANEL","COCACOLA","AMAZON","SPOTIFY","AUDI",
        "LOEWE","BALENCIAGA","SAGAZMOBILITY","LATRAJERIA","SAGAZ","DUREX","PORSCHE"
    ],
    personajes: [
        "PEDROSANCHEZ","IGLESIAS","ERREJON","ABASCAL","ALVISE","RAJOY","AZNAR",
        "BISBAL","JUANCARLOS","FELIPEVI","YOLANDADIAZ","MONTERO","FRANCO"
    ],
    adultos: [
        "SEXO","BORRACHO","RESACA","CORNUDO","ORGASMO",
        "CULO","EMPALMADO","PUTICLUB","69","DESEO",
        "CONDON","PORNO","FETICHE","TRIO","GIGOLO",
        "VICIO","PASION","TETAS","NINFOMANA","PUTA","CONO","POLLA"
    ]
};

let roles = [];
let current = 0;
let adultosDesbloqueado = false;  
const PIN_ADULTOS = "1234"; // CAMBIAR AQU칈 SI QUIERES OTRO PIN

// =============================
// DESBLOQUEO TEM츼TICA ADULTOS
// =============================
function checkAdultos() {
    if (document.getElementById("tema").value === "adultos" && !adultosDesbloqueado) {
        document.getElementById("pinBox").style.display = "block";
    }
}

function validarPIN() {
    const pin = document.getElementById("pinInput").value;
    if (pin === PIN_ADULTOS) {
        adultosDesbloqueado = true;
        document.getElementById("pinBox").style.display = "none";
        alert("Tem치tica ADULTOS desbloqueada");
    } else {
        alert("PIN incorrecto");
        document.getElementById("tema").value = "animales";
    }
}

// =============================
// INICIAR JUEGO
// =============================
function startGame() {
    let p = parseInt(document.getElementById("players").value);
    let i = parseInt(document.getElementById("impostors").value);
    let tema = document.getElementById("tema").value;

    if (!p || !i) { alert("Rellena participantes e impostores"); return; }
    if (i >= p) { alert("Impostores debe ser menor que participantes"); return; }

    // Ocultar t칤tulo y mostrar leyenda
    document.getElementById("tituloJuego").style.display = "none";
    document.getElementById("leyenda").style.display = "block";

    // Palabra autom치tica seg칰n tem치tica
    const lista = listas[tema];
    const w = lista[Math.floor(Math.random() * lista.length)];

    roles = Array(p).fill(w);
    for (let x = 0; x < i; x++) roles[x] = "IMPOSTOR";

    roles.sort(() => Math.random() - 0.5);

    document.getElementById("setup").style.display = "none";
    document.getElementById("game").style.display = "block";

    updatePlayer();
}

// =============================
// SIGUIENTE JUGADOR
// =============================
function updatePlayer() {
    document.getElementById("playerNum").innerText =
        "Participante " + (current + 1);

    document.getElementById("wordBox").innerText = "";
    document.getElementById("showBtn").style.display = "inline-block";
    document.getElementById("nextBtn").style.display = "none";
}

// =============================
// MOSTRAR PALABRA
// =============================
function showWord() {
    const beep = new Audio("https://actions.google.com/sounds/v1/cartoon/boing.ogg");
    beep.play();

    document.getElementById("wordBox").innerText = roles[current];
    document.getElementById("showBtn").style.display = "none";
    document.getElementById("nextBtn").style.display = "inline-block";
}

// =============================
// SIGUIENTE O FIN DEL JUEGO
// =============================
function nextPlayer() {
    current++;

    if (current >= roles.length) {

        // Ocultar palabra y botones
        document.getElementById("wordBox").innerText = "";
        document.getElementById("showBtn").style.display = "none";
        document.getElementById("nextBtn").style.display = "none";
        document.getElementById("leyenda").style.display = "none";

        // Pantalla final
        document.getElementById("playerNum").innerText = "";
        document.getElementById("wordBox").innerText = "춰A JUGAR!";
        document.getElementById("wordBox").style.fontSize = "40px";
        document.getElementById("wordBox").style.color = "#008000";

        // Reinicio autom치tico
        setTimeout(() => location.reload(), 2000);
        return;
    }

    updatePlayer();
}

// =============================
// SERVICE WORKER
// =============================
if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("service-worker.js");
}
</script>
</head>

<body>

<h2 id="tituloJuego">IMPOSTOR</h2>

<div id="setup">

    <label>N췈 Participantes:</label><br>
    <input id="players" type="number"><br><br>

    <label>N췈 Impostores:</label><br>
    <input id="impostors" type="number"><br><br>

    <label>Tem치tica:</label><br>
    <select id="tema" onchange="checkAdultos()">
        <option value="animales">Animales</option>
        <option value="objetos">Objetos</option>
        <option value="profesiones">Profesiones</option>
        <option value="acciones">Acciones</option>
        <option value="comida">Comida</option>
        <option value="marcas">Marcas</option>
        <option value="personajes">Personajes</option>
        <option value="adultos">Adultos 游</option>
    </select>
    <br><br>

    <div id="pinBox">
        <label>Introduce PIN:</label><br>
        <input id="pinInput" type="password">
        <button onclick="validarPIN()">OK</button>
        <br><br>
    </div>

    <button onclick="startGame()">Comenzar</button>
</div>

<div id="game">
    <h3 id="playerNum"></h3>
    <div id="wordBox"></div>

    <button id="showBtn" onclick="showWord()">Mostrar palabra</button>
    <button id="nextBtn" onclick="nextPlayer()" style="display:none;">Pasar m칩vil</button>

    <div id="leyenda">
        Tendr치s que decir palabras relacionadas con la que ves arriba, pero nunca decirla directamente.
        Para dificultar el juego, usa pistas que tengan sentido pero no sean literales, porque el impostor podr칤a detectarlo.
    </div>
</div>

</body>
</html>
